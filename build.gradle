buildscript {
  repositories {
    jcenter()
  }
  dependencies {
    classpath "be.insaneprogramming.gradle:animalsniffer-gradle-plugin:1.4.0"
    classpath "net.researchgate:gradle-release:2.2.2"
  }
}

apply plugin: 'net.researchgate.release'

release {
  git {
    requireBranch = ''
  }
}

allprojects  {
  apply plugin: 'maven'

  group = 'com.squareup.retrofit'
  version = version
}

configure(subprojects - project(':adapters') - project('converters')) {
  
  apply plugin: 'java'

  sourceCompatibility = 1.7
  targetCompatibility = 1.7

  rootProject.afterReleaseBuild.dependsOn install

  apply plugin: 'checkstyle'

  checkstyle {
    configFile = new File(rootDir, "checkstyle.xml")
    configProperties = [
            'checkstyle.cache.file' : new File(project.buildDir, '/tmp/checkstyle-cachefile')
    ]
    sourceSets = project.sourceSets - project.sourceSets.test
  }

  apply plugin: 'be.insaneprogramming.gradle.animalsniffer'

  animalsniffer {
    signature = 'org.codehaus.mojo.signature:java16:+@signature'
  }

  repositories {
    mavenLocal()

    maven { url "https://oss.sonatype.org/content/repositories/snapshots" }
    maven { url "http://repo.maven.apache.org/maven2" }
  }

}
