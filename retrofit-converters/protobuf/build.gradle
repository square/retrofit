apply plugin: 'java-library'
apply plugin: 'com.google.protobuf'
apply plugin: 'com.vanniktech.maven.publish'
applyOsgi(this)

jar {
  // MANIFEST.MF, including OSGi bnd instructions.
  bnd '''
  Export-Package: retrofit2.converter.protobuf
  Import-Package: *
  Automatic-Module-Name: retrofit2.converter.protobuf
  Bundle-SymbolicName: com.squareup.retrofit2.converter.protobuf
  '''
}

dependencies {
  api project(':retrofit')
  api deps.protobuf
  compileOnly deps.findBugsAnnotations

  testImplementation deps.junit
  testImplementation deps.assertj
  testImplementation deps.mockwebserver
}

protobuf {
  protoc {
    artifact = "com.google.protobuf:protoc:${versions.protobuf}"
  }
}
